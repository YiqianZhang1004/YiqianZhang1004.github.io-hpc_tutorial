<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Submitting Batch Jobs | HPC Tutorial in CINEMA</title>
  <meta name="description" content="This document is a concise guide for CINEMA Research Group members on using the HPC resources. It includes instructions for accessing the HPC cluster, submitting SLURM batch jobs, and using key bioinformatics tools like Woltka, Samtools, Qiime 2, and Kraken2, ensuring efficient utilization of HPC for research tasks." />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Submitting Batch Jobs | HPC Tutorial in CINEMA" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This document is a concise guide for CINEMA Research Group members on using the HPC resources. It includes instructions for accessing the HPC cluster, submitting SLURM batch jobs, and using key bioinformatics tools like Woltka, Samtools, Qiime 2, and Kraken2, ensuring efficient utilization of HPC for research tasks." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Submitting Batch Jobs | HPC Tutorial in CINEMA" />
  
  <meta name="twitter:description" content="This document is a concise guide for CINEMA Research Group members on using the HPC resources. It includes instructions for accessing the HPC cluster, submitting SLURM batch jobs, and using key bioinformatics tools like Woltka, Samtools, Qiime 2, and Kraken2, ensuring efficient utilization of HPC for research tasks." />
  

<meta name="author" content="Yiqian Zhang" />


<meta name="date" content="2024-07-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="conda.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">HPC Tutorial in CINEMA</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Read First</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#lab-group-directory"><i class="fa fa-check"></i><b>1.1</b> Lab Group Directory</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#key-areas-in-cwru-hpc-ondemand-web-portal"><i class="fa fa-check"></i><b>1.2</b> Key Areas in CWRU HPC OnDemand Web Portal</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#bioinformatics-package-installation-status"><i class="fa fa-check"></i><b>1.3</b> Bioinformatics Package Installation Status</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="submitting-batch-jobs.html"><a href="submitting-batch-jobs.html"><i class="fa fa-check"></i><b>2</b> Submitting Batch Jobs</a></li>
<li class="chapter" data-level="3" data-path="conda.html"><a href="conda.html"><i class="fa fa-check"></i><b>3</b> Conda</a></li>
<li class="chapter" data-level="4" data-path="woltka.html"><a href="woltka.html"><i class="fa fa-check"></i><b>4</b> Woltka</a></li>
<li class="chapter" data-level="5" data-path="samtools.html"><a href="samtools.html"><i class="fa fa-check"></i><b>5</b> Samtools</a>
<ul>
<li class="chapter" data-level="5.1" data-path="samtools.html"><a href="samtools.html#use-samtools"><i class="fa fa-check"></i><b>5.1</b> Use Samtools</a></li>
<li class="chapter" data-level="5.2" data-path="samtools.html"><a href="samtools.html#install-samtools"><i class="fa fa-check"></i><b>5.2</b> Install Samtools</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="qiime-2.html"><a href="qiime-2.html"><i class="fa fa-check"></i><b>6</b> QIIME 2</a></li>
<li class="chapter" data-level="7" data-path="kraken2.html"><a href="kraken2.html"><i class="fa fa-check"></i><b>7</b> Kraken2</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">HPC Tutorial in CINEMA</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="submitting-batch-jobs" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Chapter 2</span> Submitting Batch Jobs<a href="submitting-batch-jobs.html#submitting-batch-jobs" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>When running programs that take a very long time to complete, itâ€™s impractical to wait for them to run on your local machine or cluster interactively. Instead, you can submit these programs as batch jobs to a High-Performance Computing (HPC) cluster. This tutorial will guide you through creating and submitting a SLURM job script to run a batch job on an HPC cluster. We will be using the <code>sbatch</code> command to submit the job.</p>
<ol style="list-style-type: decimal">
<li>Create a SLURM Job Script:</li>
</ol>
<p>A SLURM job script is a Bash script that contains directives for the SLURM workload manager. These directives specify resources such as the number of nodes, CPU cores, memory, job duration, and more. Below is a sample SLURM job script:</p>
<p><strong>YourFileName.slurm:</strong></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="submitting-batch-jobs.html#cb2-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb2-2"><a href="submitting-batch-jobs.html#cb2-2" tabindex="-1"></a><span class="co">#SBATCH -N 3 # Requests 3 node for the job</span></span>
<span id="cb2-3"><a href="submitting-batch-jobs.html#cb2-3" tabindex="-1"></a><span class="co">#SBATCH -c 24 # Requests 24 CPU core</span></span>
<span id="cb2-4"><a href="submitting-batch-jobs.html#cb2-4" tabindex="-1"></a><span class="co">#SBATCH --mem-per-cpu=128G # Allocates 128 GB of memory per CPU core</span></span>
<span id="cb2-5"><a href="submitting-batch-jobs.html#cb2-5" tabindex="-1"></a><span class="co">#SBATCH --time=0-00:15:00 # 15 minutes</span></span>
<span id="cb2-6"><a href="submitting-batch-jobs.html#cb2-6" tabindex="-1"></a><span class="co">#SBATCH --output=my.stdout  # Directs the standard output to a file named &quot;my.stdout&quot;</span></span>
<span id="cb2-7"><a href="submitting-batch-jobs.html#cb2-7" tabindex="-1"></a><span class="co">#SBATCH --error=my.stderr # Directs the standard error to a file named &quot;my.stderr&quot;</span></span>
<span id="cb2-8"><a href="submitting-batch-jobs.html#cb2-8" tabindex="-1"></a><span class="co">#SBATCH --mail-user=abac123@case.edu # Specifies the email address to receive job notifications.</span></span>
<span id="cb2-9"><a href="submitting-batch-jobs.html#cb2-9" tabindex="-1"></a><span class="co">#SBATCH --mail-type=ALL # Sends email notifications for all events (job start, end, fail, etc.)</span></span>
<span id="cb2-10"><a href="submitting-batch-jobs.html#cb2-10" tabindex="-1"></a><span class="co">#SBATCH --job-name=&quot;just_a_test&quot; # Names the job &quot;just_a_test&quot;</span></span>
<span id="cb2-11"><a href="submitting-batch-jobs.html#cb2-11" tabindex="-1"></a></span>
<span id="cb2-12"><a href="submitting-batch-jobs.html#cb2-12" tabindex="-1"></a><span class="co"># Put commands for executing job below this line</span></span>
<span id="cb2-13"><a href="submitting-batch-jobs.html#cb2-13" tabindex="-1"></a><span class="co"># example:</span></span>
<span id="cb2-14"><a href="submitting-batch-jobs.html#cb2-14" tabindex="-1"></a><span class="ex">module</span> load Python </span>
<span id="cb2-15"><a href="submitting-batch-jobs.html#cb2-15" tabindex="-1"></a><span class="ex">python</span> <span class="at">--version</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Save the Job Script:</li>
</ol>
<p>Save the script with a <code>.slurm</code> extension. For example, save it as <code>YourFileName.slurm</code>.</p>
<ol start="3" style="list-style-type: decimal">
<li>Access the HPC Cluster:</li>
</ol>
<p>Connect to the HPC cluster using <code>cluster/_pioneer Shell Access</code>.</p>
<ol start="4" style="list-style-type: decimal">
<li>Navigate to the Directory Containing Your SLURM Script:</li>
</ol>
<p>Use the <code>cd</code> command to navigate to the directory where you saved <code>YourFileName.slurm</code>.</p>
<ol start="5" style="list-style-type: decimal">
<li>Submit the SLURM Job Script:</li>
</ol>
<p>Use the sbatch command to submit your job script to the SLURM scheduler:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="submitting-batch-jobs.html#cb3-1" tabindex="-1"></a><span class="ex">sbatch</span> YourFileName.slurm</span></code></pre></div>
<ol start="6" style="list-style-type: decimal">
<li><p>Monitor the Job:
You can check the progress of the job in the <code>Job/Active Jobs</code> section.</p></li>
<li><p>Check Job Output:</p></li>
</ol>
<p>Once the job completes, check the output file (<code>my.stdout</code> in this example) for the results of your job. If the job failed, you can check the <code>my.stderr</code> file for the reason.</p>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="conda.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/index.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
